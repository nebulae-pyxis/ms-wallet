<div id="mail" class="page-layout carded left-sidenav" fusePerfectScrollbar>
  <!-- TOP BACKGROUND -->
  <div class="top-bg mat-accent-bg"></div>
  <!-- / TOP BACKGROUND -->

  <mat-sidenav-container>
    <!-- SIDENAV -->
    <mat-sidenav
      class="sidenav"
      align="start"
      mode="side"
      opened="true"
      fuseMatSidenavHelper="carded-left-sidenav"
      mat-is-locked-open="gt-md"
    >
      <!-- SIDENAV HEADER -->
      <div
        fxLayout="column"
        fxLayoutAlign="space-between start"
        class="header p-24 pb-4"
        ngClass="mat-accent-bg"
        ngClass.gt-md="white-fg"
      >
        <div class="logo" fxFlex fxLayout="row" fxLayoutAlign="start center">
          <mat-icon
            class="logo-icon s-32"
            *fuseIfOnDom
            [@animate]="{ value: '*', params: { delay: '50ms', scale: '0.2' } }"
            >book</mat-icon
          >
          <span
            class="logo-text"
            *fuseIfOnDom
            [@animate]="{ value: '*', params: { delay: '100ms', x: '-25px' } }"
            >{{ "WALLET.TRANSACTION_HISTORY" | translate }}</span
          >
        </div>

        <div
          class="account"
          fxLayout="column"
          *fuseIfOnDom
          [@animate]="{ value: '*', params: { delay: '300ms' } }"
        >
          <div class="title">John Doe</div>
          <mat-form-field floatPlaceholder="never">
            <mat-select
              class="account-selection"
              placeholder="Mail Selection"
              [ngModel]="selectedAccount"
            >
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <!-- / SIDENAV HEADER -->

      <!-- SIDENAV CONTENT -->
      <div
        class="content"
        fusePerfectScrollbar
        *fuseIfOnDom
        [@animate]="{ value: '*', params: { y: '50px' } }"
      >
        <div class="nav" fxLayout="column">
          <div class="nav-subheader">{{ "WALLET.FILTER" | translate }}</div>

          <form
            fxLayout="column"
            fxLayoutAlign="start"
            fxFlex="100"
            name="form"
            [formGroup]="filterForm"
          >
            <div
              fxLayout="column"
              fxLayoutAlign="space-between center"
              fxFlex="100"
            >
              <mat-form-field>
                <input
                  matInput
                  [matDatepicker]="pickerInitDate"
                  placeholder="{{'WALLET.INIT_DATE' | translate}}"
                  formControlName="initDate"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="pickerInitDate"
                ></mat-datepicker-toggle>
                <mat-datepicker
                  type="datetime"
                  clockStep="5"
                  #pickerInitDate
                ></mat-datepicker>
              </mat-form-field>

              <mat-form-field>
                <input
                  matInput
                  [matDatepicker]="pickerEndDate"
                  placeholder="{{'WALLET.END_DATE' | translate}}"
                  formControlName="endDate"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="pickerEndDate"
                ></mat-datepicker-toggle>
                <mat-datepicker
                  type="datetime"
                  clockStep="5"
                  #pickerEndDate
                ></mat-datepicker>
              </mat-form-field>

              <mat-form-field>
                <mat-select
                  placeholder="{{'WALLET.SELECT_TRANSACTION_TYPE' | translate}}"
                  formControlName="transactionType"
                  id="transactionType"
                >
                  <mat-option>Clear</mat-option>
                  <mat-option
                    *ngFor="let transactionType of transactionTypes"
                    [value]="transactionType"
                  >
                    transactionType
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field fxFlex="100">
                <mat-select
                  placeholder="{{'WALLET.SELECT_TRANSACTION_CONCEPT' | translate}}"
                  formControlName="transactionConcept"
                >
                  <mat-option
                    *ngFor="let transactionConcept of transactionConcepts"
                    [value]="transactionConcept"
                  >
                    transactionConcept
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <input
                  matInput
                  placeholder="{{'WALLET.TERMINAL_ID' | translate}}"
                  formControlName="terminalId"
                  id="terminalId"
                />
              </mat-form-field>

              <mat-form-field>
                <input
                  matInput
                  placeholder="{{'WALLET.TERMINAL_USER_ID' | translate}}"
                  formControlName="terminalUserId"
                  id="terminalUserId"
                />
              </mat-form-field>

              <mat-form-field>
                <input
                  matInput
                  placeholder="{{'WALLET.TERMINAL_USERNAME' | translate}}"
                  formControlName="terminalUsername"
                  id="terminalUsername"
                />
              </mat-form-field>

              <button
                fxFlex
                mat-raised-button
                mat-button
                class="mat-accent compose-dialog-button"
                aria-label="Filter"
                (click)="resetFilter()"
              >
                {{ "WALLET.RESET_FILTER" | translate }}
              </button>
            </div>
          </form>

          <div class="p-24">
            <button
              fxFlex
              mat-raised-button
              mat-button
              class="mat-accent compose-dialog-button"
              aria-label="Filter"
              (click)="resetFilter()"
            >
              {{ "WALLET.RESET_FILTER" | translate }}
            </button>
          </div>
        </div>
      </div>
      <!-- / SIDENAV CONTENT -->
    </mat-sidenav>
    <!-- / SIDENAV -->

    <!-- CENTER -->
    <div class="center">
      <!-- CONTENT HEADER -->
      <div class="header" fxLayout="row" fxLayoutAlign="start center">
        <div
          class="search-wrapper"
          fxFlex
          fxLayout="row"
          fxLayoutAlign="start center"
        >
          <button
            mat-button
            class="mat-icon-button sidenav-toggle"
            fuseMatSidenavToggler="carded-left-sidenav"
            fxHide.gt-md
            aria-label="Toggle Sidenav"
          >
            <mat-icon>menu</mat-icon>
          </button>

          <div
            class="search mat-white-bg"
            flex
            fxLayout="row"
            fxLayoutAlign="start center"
          >
            <mat-icon>search</mat-icon>
            <mat-select
              [placeholder]="'WALLET.SELECT_BUSINESS' | translate"
              [(value)]="selectedBusinessData"
              (selectionChange)="onSelectBusinessEvent($event.value)"
              fxFlex
            >
              <mat-option
                *ngFor="let business of allBusiness"
                [value]="business"
              >
                {{ business.name }} - {{ business._id }}
              </mat-option>
            </mat-select>
          </div>
        </div>
      </div>
      <!-- / CONTENT HEADER -->

      <!-- CONTENT CARD -->
      <div class="content-card mat-white-bg">
          <mat-table id="transaction-history-table" class="item-table" #table [dataSource]="dataSource">

              <!-- Timestamp Column -->
              <ng-container cdkColumnDef="timestamp">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TIMESTAMP' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{transaction.timestamp | date: 'dd/MM/y HH:mm:ss'}}</p>
                </mat-cell>
              </ng-container>
      
              <!-- From Column -->
              <ng-container cdkColumnDef="type">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TRANSACTION_TYPE' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{'WALLET.TYPES.'+transaction.type | translate}}</p>
                </mat-cell>
              </ng-container>
      
              <!-- Concept Column -->
              <ng-container cdkColumnDef="concept">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TRANSACTION_CONCEPT' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{'WALLET.CONCEPTS.'+transaction.concept | translate}}</p>
                </mat-cell>
              </ng-container>
      
              <!-- Value Column -->
              <ng-container cdkColumnDef="value">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TRANSACTION_VALUE' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{transaction.value | currency}}</p>
                </mat-cell>
              </ng-container>
      
              <!-- Pocket Column -->
              <ng-container cdkColumnDef="pocket">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TRANSACTION_POCKET' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{'WALLET.'+transaction.pocket | translate}}</p>
                </mat-cell>
              </ng-container>
      
              <!-- User Column -->
              <ng-container cdkColumnDef="user">
                <mat-header-cell *cdkHeaderCellDef>{{'WALLET.TRANSACTION_USER' | translate}}</mat-header-cell>
                <mat-cell *cdkCellDef="let transaction">
                  <p class="text-truncate">{{transaction.user}}</p>
                </mat-cell>
              </ng-container>
      
              <mat-header-row *cdkHeaderRowDef="displayedColumns"></mat-header-row>
      
              <mat-row *cdkRowDef="let transaction; columns: displayedColumns;" class="transactions"
              (click)="selectTransactionHistoryRow(transaction)" [ngClass]="{'highlight': selectedTransactionHistory && selectedTransactionHistory._id == transaction._id}"
              [routerLink]="transaction._id" matRipple>
              </mat-row>
      
            </mat-table>
        <mat-paginator
          #paginator
          [length]="tableSize"
          [pageIndex]="0"
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 25, 100]"
        >
        </mat-paginator>
      </div>
      <!-- / CONTENT CARD -->
    </div>
    <!-- / CENTER -->
  </mat-sidenav-container>
</div>
